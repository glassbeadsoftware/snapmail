{"version":3,"file":"spawn.js","sourceRoot":"","sources":["../src/spawn.ts"],"names":[],"mappings":";;;AAAA,qCAA+B;AAC/B,2CAA0C;AAC1C,iDAA0C;AAG1C,MAAM;AACN,SAAgB,aAAa,CAAC,GAAU;IACtC,MAAM,GAAG,GAAG,MAAM,CAAC;IACnB,MAAM,IAAI,GAAU,CAAC,IAAI,EAAE,CAAC,EAAE,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;IAEhD,mCAAmC;IACnC,YAAG,CAAC,MAAM,EAAE,WAAW,GAAG,GAAG,GAAG,SAAS,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC;IACvD,MAAM,IAAI,GAAG,yBAAS,CAAC,GAAG,EAAE,IAAI,EAAE;QAChC,GAAG,EAAE,uBAAW;QAChB,kBAAkB;QAClB,OAAO,EAAE,IAAI;QACb,QAAQ,EAAE,MAAM;QAChB,GAAG,EAAE;YACH,GAAI,OAAO,CAAC,GAAG;YACf,cAAc,EAAE,GAAG;SACpB;KACF,CAAC,CAAC;IACH,YAAG,CAAC,MAAM,EAAE,eAAe,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC;IAC3C,OAAO,IAAI,CAAC,MAAM,IAAI,IAAI,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC;AACjD,CAAC;AAlBD,sCAkBC","sourcesContent":["import { log } from \"./logger\";\nimport { CURRENT_DIR } from \"./constants\";\nimport { spawnSync } from \"child_process\";\n\n\n/** */\nexport function pingBootstrap(url:string): boolean {\n  const bin = \"ping\";\n  const args: any[] = ['-n', 1, url.substring(8)];\n\n  /** Spawn \"holochain\" subprocess */\n  log('info', 'Spawning ' + bin + ' (url: ' + url + ')');\n  const proc = spawnSync(bin, args, {\n    cwd: CURRENT_DIR,\n    //detached: false,\n    timeout: 5000,\n    encoding: 'utf8', //stdio: 'pipe',\n    env: {\n      ... process.env,\n      RUST_BACKTRACE: \"1\",\n    },\n  });\n  log('info', 'ping result: ' + proc.stdout);\n  return proc.status == null || proc.status == 0;\n}\n"]}